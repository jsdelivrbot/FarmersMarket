<!doctype html>
<link rel="alternate" type="application/json" href="{{ request.path }}.json">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
<title>All open help requests</title>

{% if request.args["sort_by"] == "priority" %}
<a href="{{ url_for('helprequestlist') }}?sort_by=time">sort by time</a>
{% else %}
<a href="{{ url_for('helprequestlist') }}?sort_by=priority">sort by priority</a>
{% endif %}

<form class="search" method="get">
  <input name="query" type="text" value="{{ request.args["query"] }}">
  {% if 'sort_by' in request.args %}
  <input name="sort_by" type="hidden" value="{{ request.args["sort_by"] }}">
  {% endif %}
  <input class="query" type="submit" value="search">
</form>

<ol>
  {% for helprequest_id, helprequest in helprequests %}
  <li itemscope
      itemid="{{ url_for('helprequest', helprequest_id=helprequest_id, _external=True) }}"
      resource="{{ url_for('helprequest', helprequest_id=helprequest_id, _external=True) }}"
      vocab="http://schema.org/"
      prefix="helpdesk: https://rawgit.com/sils-webinfo/helpdesk/master/vocab.ttl#"
      property="helpdesk:helprequests"
      typeof="helpdesk:HelpRequest">
    <div itemprop="http://www.w3.org/ns/md#item"
         itemscope itemtype="http://schema.org/CreativeWork/HelpRequest">
    <time itemprop="dateCreated"
          property="dateCreated"
          datetime="{{ helprequest.time }}">{{ helprequest.time }}</time>
    priority: {{ priorities[helprequest.priority] }}
    <a href="{{ url_for('helprequest', helprequest_id=helprequest_id) }}">
      <span itemprop="name" property="name">{{ helprequest.title }}</span>
    </a>
    </div>
  </li>
  {% endfor %}
</ol>




<script>
$(document).ready(function() {
    var max_fields      = 10; //maximum input boxes allowed
    var wrapper         = $(".create"); //Fields wrapper
    var add_button      = $(".add_field_button"); //Add button ID
    
    var x = 1; //initlal text box count
    $(add_button).click(function(e){ //on add input button click
        e.preventDefault();
        if(x < max_fields){ //max input box allowed
            x++; //text box increment
            $(wrapper).append('<div><input type="text" name="prodcts"/><a href="#" class="remove_field">Remove</a></div>'); //add input box
        }
    });
    
    $(wrapper).on("click",".remove_field", function(e){ //user click on remove text
        e.preventDefault(); $(this).parent('div').remove(); x--;
    })
});
</script>



<form class="helprequest-editor" action="{{ url_for('helprequestlist') }}" method="post">
  <label>from
    <input name="from" type="text">
  </label>
  <br>
  <label>Farmers Market Name
    <input name="title" type="text">
  </label>
  <br>
  <textarea name="description"></textarea>
  <br>  
  <br>
  <label>Products
    <br>
    <div class="create">
      <button class="add_field_button">Add More Fields</button>
  <textarea name="products"></textarea>
  <textarea name="products"></textarea>
  </label>
  <br>  
  <input class="create" type="submit" value="create new Farmers Market">
</div>
</form>


    
 
